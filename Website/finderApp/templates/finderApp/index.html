{% load staticfiles %}
<script type="text/javascript" src="{% static 'bower_components/jquery/jquery.min.js' %}"></script>
<link rel="stylesheet" type="text/css" href="{% static 'finderApp/css/bootstrap.min.css' %}" />
<link rel="stylesheet/less" type="text/css" href="{% static 'finderApp/css/main.less' %}" />
<script type="text/javascript" src="{% static 'bower_components/less/less.min.js' %}"></script>

<script type="text/javascript">
	var ingredient_list = [];
	function add_ingredient() {
		var new_ingredient = $("#ingredient_finder_input").val();
		if (new_ingredient != "") {
			ingredient_list.push(new_ingredient);	
			$("#ingredient_finder_input").val("");

			// debugging
			console.log(ingredient_list);

			var new_ingredient_tag = $(document.createElement("button"));
			var tag_text = $(document.createTextNode(new_ingredient));
			new_ingredient_tag.append(tag_text);
			$("#added_ingredients").append(new_ingredient_tag);

		} else {
			console.log("empty input");
		}
	}

	// pass ingredient array to search page for recipe results
	function search_recipe() {
		var hidden_input = $(document.createElement("input"));
	    hidden_input.attr("type", "text");
	    hidden_input.attr("name", "ingredient_list");
	    hidden_input.attr("value", JSON.stringify(ingredient_list));

		$("#search_recipe_form").append(hidden_input);
		$("#search_recipe_form").submit();
	}
</script>


<!-- Navbar -->
<nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="/finder/">DishFinder</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/finder/">Home</a></li>
        <li><a href="contact.html">Contact</a></li>
        <!--Sign In dropdown-->
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Sign in <b class="caret"></b></a>
          <ul class="dropdown-menu" style="padding: 15px;min-width: 250px;">
              <li>
                <div class="row">
                  <div class="col-md-12">
                    <form class="form" role="form" method="post" action="login" accept-charset="UTF-8" id="login-nav">
                      <div class="form-group">
                         <label class="sr-only" for="exampleInputEmail2">Email address</label>
                         <input type="email" class="form-control" id="exampleInputEmail2" placeholder="Email address" required>
                      </div>
                      <div class="form-group">
                         <label class="sr-only" for="exampleInputPassword2">Password</label>
                         <input type="password" class="form-control" id="exampleInputPassword2" placeholder="Password" required>
                      </div>
                      <div class="checkbox">
                         <label class="bg-5">
                         <input type="checkbox"> Remember me
                         </label>
                      </div>
                      <div class="form-group">
                         <button type="submit" class="btn btn-block orangebutton">Sign in</button>
                      </div>
                    </form>
                  </div>
                </div>
              </li>
          </ul>      
        </li>
        <li><a href="signup.html">Sign Up</a></li>
      </ul>
    </div>
  </div>
</nav>


<!-- First Container -->
<div class="container-fluid bg-1 text-center">
  	<h1 class="margin">What do you have in your fridge?</h1>

  	<!-- search bar to add ingredients-->
	<div id="ingredient_finder">
		<input type="text" name="input_ingedient" id="ingredient_finder_input">
		<button id="ingredient_finder_add_button" onclick="add_ingredient()">Add</button>
	</div>

	<!-- display added ingredients -->
	<div id="added_ingredients">
	</div>

	<!-- submit ingredient query and direct to search_result page -->
	<form id="search_recipe_form" action="/finder/search/" method="get">
		<div class="btn btn-success btn-lg">
			<span class="glyphicon glyphicon-search"></span>
			<input id="search_recipe_button" type="button" onclick="search_recipe()" value="Search">
		</div>
	</form>
</div>



<!-- Second Container -->
<div class="container-fluid bg-3">
  <!--title-->
  <div class="text-center">
    <h1>How does it work?</h1>
    <br>
  </div>
  
  <div class="container bg-3">
    <!--instruction-->
    <div class="row">

      <div class="col-sm-4">
        <div class="panel panel-default text-center ins1">
          <div class="panel-heading ins1">
            <h1 class="text-left">Step 1</h1>
          </div>
          <div class="panel-body">
            <br>
            <h3>Fill in your</h3>
            <h3>ingredients</h3>
            <br>
          </div>
        </div> 
      </div> 

      <div class="col-sm-4">
        <div class="panel panel-default text-center ins2">
          <div class="panel-heading ins2">
            <h2 class="text-left">Step 2</h2>
          </div>
          <div class="panel-body">
            <br>
            <h3>Select</h3>
            <h3>a tasty dish</h3>
            <br>
          </div>
        </div> 
      </div> 

     <div class="col-sm-4">
        <div class="panel panel-default text-center ins3">
          <div class="panel-heading ins3">
            <h2 class="text-left">Step 3</h2>
          </div>
          <div class="panel-body">
            <br>
            <h3>Follow recipe</h3>
            <h3>and Enjoy!</h3>
            <br>
          </div>
        </div> 
      </div> 

    </div>
  </div>
</div>  


<!-- Footer -->
<footer class="container-fluid bg-4 text-center">
</footer>